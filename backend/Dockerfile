FROM maven:3.9.9-eclipse-temurin-21

ARG FRONTEND_URL
ARG UNSUBSCRIBE_URI
ARG MAIL_USERNAME
ARG MAIL_PASSWORD
ARG DB_USERNAME
ARG DB_PASSWORD

ENV FRONTEND_URL=$FRONTEND_URL
ENV UNSUBSCRIBE_URI=$UNSUBSCRIBE_URI
ENV MAIL_USERNAME=$MAIL_USERNAME
ENV MAIL_PASSWORD=$MAIL_PASSWORD
ENV DB_USERNAME=$DB_USERNAME
ENV DB_PASSWORD=$DB_PASSWORD

EXPOSE 8080

WORKDIR /app
COPY . .
RUN mvn clean package
ENTRYPOINT ["java", "-jar", "target/notice-tracker-0.0.1-SNAPSHOT.jar"]
